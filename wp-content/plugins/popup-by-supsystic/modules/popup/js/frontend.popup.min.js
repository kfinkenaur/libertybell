
var g_ppsWindowLoaded=false,g_ppsIsPageCached=false,g_ppsIsPageCachedChecked=false,g_ppsShowCallbacks={},g_ppsClks={};jQuery(document).ready(function(){if(typeof(ppsPopupsFromFooter)!=="undefined"&&ppsPopupsFromFooter&&ppsPopupsFromFooter.length){ppsPopups=typeof(ppsPopups)==="undefined"?[]:ppsPopups;ppsPopups=ppsPopups.concat(ppsPopupsFromFooter)}jQuery(document).trigger("ppsBeforePopupsStartInit",ppsPopups);if(typeof(ppsPopups)!=="undefined"&&ppsPopups&&ppsPopups.length){ppsInitBgOverlay();jQuery(document).trigger("ppsBeforePopupsInit",ppsPopups);for(var a=0;a<ppsPopups.length;a++){jQuery("body").append(ppsPopups[a].rendered_html);ppsMovePopupStyles(ppsPopups[a]);ppsBindPopupLove(ppsPopups[a]);ppsBindPopupLoad(ppsPopups[a]);ppsBindPopupShow(ppsPopups[a]);ppsBindPopupActions(ppsPopups[a]);ppsBindPopupClose(ppsPopups[a]);ppsBindPopupSubscribers(ppsPopups[a]);ppsBindPopupForceShow(ppsPopups[a]);ppsCheckPopupGetNotices(ppsPopups[a])}_ppsBindOnElementClickPopups();_ppsBindClickHrefSaving();setTimeout(_ppsBindOnElementClickPopups,300);jQuery(document).trigger("ppsAfterPopupsInit",ppsPopups);jQuery(window).resize(function(){for(var b=0;b<ppsPopups.length;b++){if(ppsPopups[b].is_visible){_ppsPositionPopup({popup:ppsPopups[b]})}}});setTimeout(function(){g_ppsWindowLoaded=true},5000)}});jQuery(window).load(function(){g_ppsWindowLoaded=true;for(var a=0;a<ppsPopups.length;a++){if(ppsPopups[a].is_visible){_ppsPositionPopup({popup:ppsPopups[a]})}}});function _ppsAddPopUpClick(b,a){g_ppsClks[b]=a}function _ppsGetPopUpClick(a){return g_ppsClks[a]}function _ppsCheckPopupOnFollowClk(e){var a=e.href,d=e.hash,b=window.location.href,c=window.location.hash;if(d){if(d&&d!=""){a=str_replace(a,d,"")}if(c&&c!=""){b=str_replace(b,c,"")}if(strpos(a,"/",a.length-1)!==false){a=a.substr(0,a.length-1)}if(strpos(b,"/",b.length-1)!==false){b=b.substr(0,b.length-1)}if(b==a){setTimeout(function(){toeReload()},100)}}}function _ppsBindOnElementClickPopups(){var b=jQuery('[href*="#ppsShowPopUp_"]:not(.ppsClickBinded)');if(b&&b.size()){b.each(function(){jQuery(this).click(function(){var d=jQuery(this).attr("href");if(d&&d!=""){d=d.split("_");d=d[1]?parseInt(d[1]):0;if(d){var c=ppsGetPopupById(d);if(c&&c.params.main.show_on=="link_follow"){_ppsCheckPopupOnFollowClk(this);return true}_ppsAddPopUpClick(d,this);if(!_ppsPopupBindDelay(d,"show_on_click_on_el_delay","show_on_click_on_el_enb_delay")){ppsShowPopup(d)}}else{_ppsCheckPopupOnFollowClk(this);return true}}return false})}).addClass("ppsClickBinded")}var a=jQuery('[title*="#ppsShowPopUp_"]:not(.ppsClickBinded)');if(a&&a.size()){a.each(function(){var e=jQuery(this).attr("title"),c=e.match(/#ppsShowPopUp_(\d+)/);if(c&&c.length==2){var d=parseInt(c[1]);if(d){jQuery(this).data("popup-id",d).attr("title",str_replace(e,c[0],"")).click(function(){var f=jQuery(this).data("popup-id");_ppsAddPopUpClick(f,this);if(!_ppsPopupBindDelay(f,"show_on_click_on_el_delay","show_on_click_on_el_enb_delay")){ppsShowPopup(f)}return false})}}}).addClass("ppsClickBinded")}}function ppsMovePopupStyles(a){var b=jQuery('<style type="text/css" />'),c=jQuery("#ppsPopupStylesHidden_"+a.view_id);b.appendTo("body").html(c.html());c.remove()}function ppsBindPopupLove(b){if(parseInt(toeOptionPps("add_love_link"))){var a=ppsGetPopupShell(b);a.append(toeOptionPps("love_link_html"))}}function ppsBindPopupLoad(d){var e=jQuery(".ppsPopupPreloadImg_"+d.view_id);d._imgsCount=e.size();if(d._imgsCount){d._imgsLoaded=false;d._imgsLoadedCount=0;e.bind("load error",function(){d._imgsLoadedCount++;if(d._imgsLoadedCount>=d._imgsCount){d._imgsLoaded=true;var g=ppsGetPopupShell(d);g.trigger("ppsShowPopupAfterAllImgs",d)}})}else{if(toeInArrayPps(d.type,["iframe","pdf"])){d._imgsLoaded=false;var c=ppsGetPopupShell(d);c.find(".ppsMainFrame").bind("load error",function(){var g=d._imgsLoaded;d._imgsLoaded=true;if(!g){setTimeout(function(){c.trigger("ppsShowPopupAfterAllImgs",d)},1000)}})}else{d._imgsLoaded=true}}var c=ppsGetPopupShell(d),f=c.find("img"),b=f?f.size():0;if(b){if(d._imgsCount){var a=false;e.each(function(){var g=jQuery(this),h=g.attr("src");f.each(function(){var i=jQuery(this),j=i.attr("src");if(j==h){f=f.filter(this);a=true;return false}})});if(a){b=f.size()}}if(b){f.bind("load error",function(){b--;if(b<=0&&d.is_visible){_ppsPositionPopup({shell:c,popup:d,recalc:true})}})}}}function ppsBindPopupShow(a){_ppsCheckBindVideo({popup:a});switch(a.params.main.show_on){case"page_load":if(!_ppsPopupBindDelay(a,"show_on_page_load_delay","show_on_page_load_enb_delay")){if(a.type=="fb_like"){a.render_with_fb_load=true}else{ppsCheckShowPopup(a)}}break;case"click_on_page":jQuery(document).click(function(){if(!a.click_on_page_displayed){ppsCheckShowPopup(a);a.click_on_page_displayed=true}});break;case"click_on_element":break;case"scroll_window":jQuery(window).scroll(function(){if(parseInt(a.params.main.show_on_scroll_window_enb_perc_scroll)){var e=parseInt(a.params.main.show_on_scroll_window_perc_scroll);if(e){var h=jQuery(document).height(),b=jQuery(window).height(),c=jQuery(window).scrollTop(),g=h-b,f=c*100/g;if(g>0&&f<e){return}}}if(!a.scroll_window_displayed){var d=0;if(a.params.main.show_on_scroll_window_enb_delay&&parseInt(a.params.main.show_on_scroll_window_enb_delay)){a.params.main.show_on_scroll_window_delay=parseInt(a.params.main.show_on_scroll_window_delay);if(a.params.main.show_on_scroll_window_delay){d=a.params.main.show_on_scroll_window_delay*1000}}if(d){setTimeout(function(){ppsCheckShowPopup(a)},d)}else{ppsCheckShowPopup(a)}a.scroll_window_displayed=true}});break}}function ppsBindPopupClose(b){var a=ppsGetPopupShell(b);a.find(".ppsPopupClose").click(function(){ppsClosePopup(b);return false})}function ppsBindPopupSubscribers(b){if(b.params.tpl.enb_subscribe){var a=ppsGetPopupShell(b),d=a.find(".ppsSubscribeForm"),e=d.find(".ppsPopupClose");switch(b.params.tpl.sub_dest){case"aweber":break;case"wordpress":case"mailchimp":case"mailpoet":default:d.submit(function(){var g=jQuery(this).find("input[type=submit]"),h=this,i=jQuery(this).find(".ppsSubMsg");g.attr("disabled","disabled");jQuery(this).sendFormPps({msgElID:i,onSuccess:function(k){jQuery(h).find("input[type=submit]").removeAttr("disabled");if(!k.error){var j=jQuery(h).parents(".ppsSubscribeShell"),l=jQuery(h).find(".ppsPopupClose");if(l&&l.size()){l.appendTo(j)}i.appendTo(j);jQuery(h).animateRemovePps(300,function(){_ppsPositionPopup({shell:a,popup:b,recalc:true})});var n=a.find(".ppsHideAfterSubscribe");if(n&&n.size()){n.animateRemovePps(300)}ppsPopupSubscribeSuccess(b);var m=b.params.sub_redirect_to_btn_url_href?b.params.sub_redirect_to_btn_url_href:false;if(!m&&k.data&&k.data.redirect){m=k.data.redirect}if(m){toeRedirect(m,parseInt(b.params.tpl.sub_redirect_new_wnd))}}else{_ppsPopupAddStat(b,"subscribe_error");if(k.data&&k.data.emailExistsRedirect){ppsPopupSubscribeSuccess(b,{ignoreSendStat:true});toeRedirect(k.data.emailExistsRedirect)}}}});return false});break}if(e&&e.size()){e.keydown(function(g){if(g.keyCode==13){d.submit();return false}})}if(navigator.userAgent.indexOf("Safari")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1)){var c=a.get(0).getElementsByTagName("form");if(c&&c.length){for(var f=0;f<c.length;f++){c[f].noValidate=true;c[f].addEventListener("submit",function(g){if(!g.target.checkValidity()){g.preventDefault();jQuery(this).find(".ppsSubMsg").addClass("ppsErrorMsg").html("Please fill-in all fields")}},false)}}}}}function ppsCheckShowPopup(b,e){if(isNumericPps(b)){b=ppsGetPopupById(b)}var h="pps_show_"+b.id,l=getCookiePps(h),n=b.params.main.show_to=="count_times",f="pps_times_showed_"+b.id,a=parseInt(getCookiePps(f));if(b.params.main.show_to=="first_time_visit"&&l){return}if(n&&l&&l!="1"){var g=(new Date(l)).getTime(),i=(new Date()).getTime();if(g){var m=(i-g)/1000,d=3600,k=parseInt(b.params.main.count_times_num);if(a&&k&&a>=k){if((b.params.main.count_times_mes=="hour"&&m<d)||(b.params.main.count_times_mes=="day"&&m<24*d)||(b.params.main.count_times_mes=="week"&&m<7*24*d)||(b.params.main.count_times_mes=="month"&&m<30*24*d)){return}if(a>=k){a=0}}}}if(!l||n){var j=parseInt(b.params.main.show_to_first_time_visit_days);j=isNaN(j)||n?30:j;if(!j){j=null}var c=n?(new Date()).toString():"1";setCookiePps("pps_show_"+b.id,c,j);if(n){setCookiePps(f,(a?a+1:1),30)}}var o=_ppsPopupGetActionDone(b);if(b.params.main.show_to=="until_make_action"&&o){return}if(_ppsCheckDisplayTime(b)){return}e=e||{};e.isUnique=l?0:1;ppsShowPopup(b,e);return false}function _ppsCheckDisplayTime(b){if(isNumericPps(b)){b=ppsGetPopupById(b)}if(b.params.main.enb_show_time&&b.params.main.show_time_from&&b.params.main.show_time_to&&b.params.main.show_time_from!=b.params.main.show_time_to){var f=function(i){var h=strpos(i,"pm")!==false?12:0;var g=parseFloat(str_replace(str_replace(str_replace(i,"am",""),"pm",""),":","."));if(toeInArray(g,[12,12.3])===-1){g+=h}else{if(!h){g-=12}}return g};var a=f(b.params.main.show_time_from),d=f(b.params.main.show_time_to),e=new Date(),c=e.getHours()+(e.getMinutes()/100);if(c<a||c>d){return true}}return false}function _ppsPopupGetActionDone(a){if(isNumericPps(a)){a=ppsGetPopupById(a)}var d="pps_actions_"+a.id,e=getCookiePps(d);if(e){if(a.type=="age_verify"&&e.age_verify&&a.params.opts_attrs.btns_number){var b=false;for(var c=0;c<a.params.opts_attrs.btns_number;c++){if(a.params.tpl["is_btn_primary_"+c]){if(c==e.age_verify){return true}b=true}}if(b){return false}}return true}return false}function _ppsPopupSetActionDone(b,d,c,g){g=g||{};if(isNumericPps(b)){b=ppsGetPopupById(b)}c=c!==null?c:"";var e="pps_actions_"+b.id,f=getCookiePps(e);if(!f){f={}}if(d=="age_verify"){f[d]=c}else{f[d]=1}var a=parseInt(b.params.main.show_to_until_make_action_days);a=isNaN(a)?30:a;if(!a){a=null}setCookiePps(e,f,a);if(!g.ignoreSendStat){_ppsPopupAddStat(b,d,c)}jQuery(document).trigger("ppsAfterPopupsActionDone",{popup:b,action:d,smType:c})}function _ppsPopupAddStat(a,d,b,c){if(a&&a.params&&a.params.tpl.dsbl_stats){return}jQuery.sendFormPps({msgElID:"noMessages",data:{mod:"statistics",action:"add",id:a.id,type:d,sm_type:b,is_unique:c,connect_hash:a.connect_hash}});jQuery(document).trigger("ppsAfterPopupsStatAdded",{popup:a,action:d,smType:b,is_unique:c})}function ppsShowPopUpOnClick(a,b){if(isNumericPps(a)){a=ppsGetPopupById(a)}_ppsSaveClickHref(a,jQuery(b));ppsShowPopup(a)}function ppsShowPopup(b,d){if(!ppsCorrectJqueryUsed()){ppsReloadCoreJs(ppsShowPopup,[b,d]);return}d=d||{};if(isNumericPps(b)){b=ppsGetPopupById(b)}var a=ppsGetPopupShell(b);if(!b._imgsLoaded){a.bind("ppsShowPopupAfterAllImgs",function(){ppsShowPopup(b,d)});return}a.data("view-id",b.view_id);if(_ppsCheckIsPageCached()){_ppsUpdatePopupNonces(b)}_ppsPopupAddStat(b,"show",0,d.isUnique);if(!d.ignoreBgOverlay){ppsShowBgOverlay(b)}if(g_ppsWindowLoaded&&!d.ignorePosition){_ppsPositionPopup({shell:a,popup:b})}if(b.params.tpl.anim&&!b.resized_for_wnd){_ppsHandlePopupAnimationShow(b,a)}else{a.show()}if(toeInArrayPps(b.type,["iframe"])){var c=a.find(".ppsMainFrame");if(c&&c.size()){c.css("width","auto");c.css("width","100%")}}_ppsCheckPlayVideo({popup:b,shell:a});_ppsIframesForReload({popup:b,shell:a});_ppsCheckInnerScripts({popup:b,shell:a});setTimeout(function(){_ppsCheckMap({popup:b,shell:a});_ppsSocialIcons({popup:b,shell:a});_ppsCheckContactForm({popup:b,shell:a});_ppsCheckVideos({popup:b,shell:a})},100);_ppsCheckPublication({popup:b,shell:a});if(b.params.tpl.dsbl_wnd_scroll){disableScrollPps("html");disableScrollPps("body")}b.is_visible=true;b.is_rendered=true;jQuery(document).trigger("ppsAfterPopupsActionShow",b);runShowClb(b,a);if(toeInArrayPps(b.type,["iframe"])){if(b.params.tpl.iframe_display_only&&b.params.tpl.iframe_display_only!=""&&typeof(_ppsIFrameDisplayOnly)=="function"&&!b.params.tpl._iframeDisplayOnlyBinded){_ppsIFrameDisplayOnly(b)}}}function _ppsCheckVideos(b){if(b.popup.type=="video"&&b.popup.params.tpl.video_type=="youtube"&&b.popup.params.tpl.video_autoplay){var a=b.shell.find("iframe:first");a.attr("src",a.attr("src")+"&autoplay=1")}}function _ppsHandlePopupAnimationShow(a,b){var c=a.params.tpl.anim.old?"magictime":"animated";b.animationDuration(a.params.tpl.anim_duration,true);b.removeClass(a.params.tpl.anim.hide_class);b.addClass(c+" "+a.params.tpl.anim.show_class).show();setTimeout(function(){b.removeClass(c+" "+a.params.tpl.anim.show_class)},parseInt(a.params.tpl.anim_duration))}function _ppsHandlePopupAnimationHide(a,b){var c=a.params.tpl.anim.old?"magictime":"animated";b.removeClass(a.params.tpl.anim.show_class).addClass(a.params.tpl.anim.hide_class);setTimeout(function(){b.removeClass(c).hide();ppsHideBgOverlay(a)},a.params.tpl.anim_duration)}function _ppsIframesForReload(c){var a=c.popup,b=c.shell?c.shell:ppsGetPopupShell(a);if(b.find("iframe")){b.find("iframe").each(function(){var d=jQuery(this).attr("src");if(d){if(d.indexOf("www.google.com/maps/embed")!==-1){this.src=this.src}}})}}function _ppsIsIframeForHide(e){e=e||{};if(e.popup.type=="video"){return true}var b=e.shell?e.shell:ppsGetPopupShell(e.popup),d=b?b.find("iframe"):false,a=false;if(d&&d.size()){var c=["youtube","vimeo","dtbaker"];d.each(function(){var f=jQuery(this).data("original-src"),h=jQuery(this).attr("src");if(h||f){for(var g=0;g<c.length;g++){if((h&&h.indexOf(c[g])!==-1)||(f&&f.indexOf(c[g])!==-1)){a=true;return false}}}})}return a}function _ppsCheckBindVideo(c){c=c||{};if(_ppsIsIframeForHide(c)){var a=c.shell?c.shell:ppsGetPopupShell(c.popup),b=a?a.find("iframe,video"):false;if(b&&b.size()){b.each(function(){jQuery(this).data("original-src",jQuery(this).attr("src"));jQuery(this).attr("src","")})}}}function _ppsCheckPlayVideo(c){c=c||{};if(_ppsIsIframeForHide(c)){var a=c.shell?c.shell:ppsGetPopupShell(c.popup),b=a?a.find("iframe,video"):false;if(b&&b.size()){b.each(function(){var d=jQuery(this).data("original-src"),e=jQuery(this).attr("src");if(d&&d!=""&&(!e||e=="")){jQuery(this).attr("src",d)}})}}}function _ppsCheckStopVideo(c){c=c||{};if(_ppsIsIframeForHide(c)){var a=c.shell?c.shell:ppsGetPopupShell(c.popup),b=a?a.find("iframe,video"):false;if(c.popup.params.tpl.video_extra_full_screen){return}if(b&&b.size()){b.each(function(){jQuery(this).attr("src","")})}}}function _ppsCheckInnerScripts(b){b=b||{};var a=b.shell?b.shell:ppsGetPopupShell(b.popup);var c=a.find("script");if(c&&c.size()){c.each(function(){var d=jQuery(this).attr("src");if(d&&d!=""){jQuery.getScript(d)}})}}function _ppsCheckMap(c){c=c||{};var a=c.shell?c.shell:ppsGetPopupShell(c.popup),b=a.find(".gmp_map_opts");if(b&&b.size()){if(typeof(gmpGetMapByViewId)==="undefined"){setTimeout(function(){_ppsCheckMap(c)},1000);return}b.each(function(){var d=jQuery(this).data("view-id"),e=gmpGetMapByViewId(d);if(e){e.fullRefresh?e.fullRefresh():e.refresh()}else{var f=gmpGetMapInfoByViewId(d);gmpInitMapOnPage(f)}})}}function _ppsCheckContactForm(b){b=b||{};var a=b.shell?b.shell:ppsGetPopupShell(b.popup),c=a.find(".cfsFormShell");if(c&&c.size()){if(typeof(g_cfsForms)==="undefined"){setTimeout(function(){_ppsCheckContactForm(b)},1000);return}if(typeof(cfsCheckInitForms)!=="undefined"){cfsCheckInitForms(a)}c.each(function(){var d=jQuery(this).attr("id"),e=g_cfsForms.getByViewHtmlId(d);if(e){e.refresh()}else{g_cfsForms.add(g_cfsForms.getFormDataByViewHtmlId(d))}})}}function _ppsSocialIcons(c){c=c||{};var b=c.shell?c.shell:ppsGetPopupShell(c.popup),a=b.find(".supsystic-social-sharing:not(.supsystic-social-sharing-loaded)");if(a&&a.size()&&typeof(window.initSupsysticSocialSharing)!=="undefined"){a.each(function(){window.initSupsysticSocialSharing(this)})}}function _ppsCheckPublication(c){c=c||{};var a=c.shell?c.shell:ppsGetPopupShell(c.popup),b=a.find(".dpsBookStageShell");if(b&&b.size()){b.each(function(){if(typeof(dpsBookMng)=="undefined"){dpsBookMng=new dpsBookManager()}var e=jQuery(this).find(".dpsBook").data("bookid"),d=dpsBookMng.getById(e);if(d){d.getHtml().turn("destroy");d.getStage().parent().html(d._baseHtml);d._init(true)}else{dpsInitBookOnPage(dpsBookInfoByTermId(e));dpsBindBookActions(e)}})}}function _ppsPositionPopup(s){s=s||{};s.popup=s.popup&&typeof(s.popup)!=="object"?ppsGetPopupById(s.popup):s.popup;var h=s.shell?s.shell:ppsGetPopupShell(s.popup);if(h){var t=s.wndWidth?s.wndWidth:jQuery(window).width(),p=s.wndHeight?s.wndHeight:jQuery(window).height(),m=h.outerWidth(),c=h.outerHeight(),q=false,k=false,r=false,b=t-10,i=p-10,n=1,f=h.hasClass("ppsResponsiveInside");if(c>=i&&!f&&!(s.popup&&s.popup._notResizeHeight)){var o=s.recalc?false:parseInt(h.data("init-height"));if(!o){o=c;h.data("init-height",o)}n=i/o;q=r=true}if(m>=b&&!f){var e=s.recalc?false:parseInt(h.data("init-width"));if(!e){e=m;h.data("init-width",e)}var a=b/e;if(a<n){n=a}q=k=true}if(q){if(s.popup.params.tpl.responsive_mode=="width_only"){if(k){var g=m-h.width();h.css({width:"calc(100% - "+(g+20)+"px)"})}else{var e=parseInt(h.data("init-width"));if(e&&e<b){h.css({width:e})}}if(r){h.css({position:"absolute"})}else{h.css({position:"fixed"})}}else{var l={left:"center",top:"center"};h.ppsZoom(n,l.left+" "+l.top)}h.data("resized",1);m=h.outerWidth();c=h.outerHeight()}else{if(h.data("resized")){if(s.popup.params.tpl.responsive_mode=="width_only"){var e=parseInt(h.data("init-width"));if(e&&e<b){h.css({width:e})}h.css({position:"fixed"})}}}s.popup.resized_for_wnd=q;jQuery(document).trigger("ppsResize",{popup:s.popup,shell:h,wndWidth:t,wndHeight:p});if(!h.positioned_outside){var d=(t-m)/2,j=(p-c)/2;d=d<0?0:d;j=j<0?0:j;if(k){d-=(e-e*a)/2}if(r&&s.popup.params.tpl.responsive_mode!="width_only"){j-=(o-o*n)/2}h.css({left:d,top:j})}}else{console.log("CAN NOT FIND POPUP SHELL TO RESIZE!")}}function ppsClosePopup(a){if(isNumericPps(a)){a=ppsGetPopupById(a)}var b=ppsGetPopupShell(a);if(a.params.tpl.anim){_ppsHandlePopupAnimationHide(a,b)}else{b.hide();ppsHideBgOverlay(a)}_ppsCheckStopVideo({shell:b,popup:a});if(a.params.tpl.dsbl_wnd_scroll){enableScrollPps("html");enableScrollPps("body")}if(parseInt(a.params.tpl.close_redirect_to_btn_url)&&a.params.close_redirect_to_btn_url_href){toeRedirect(a.params.close_redirect_to_btn_url_href,parseInt(a.params.tpl.reidrect_on_close_new_wnd))}else{if(a.params.tpl.reidrect_on_close&&a.params.tpl.reidrect_on_close!=""){toeRedirect(a.params.tpl.reidrect_on_close,parseInt(a.params.tpl.reidrect_on_close_new_wnd))}}_ppsPopupAddStat(a,"close");a.is_visible=false}function ppsGetPopupShell(a){if(isNumericPps(a)){a=ppsGetPopupById(a)}return jQuery("#ppsPopupShell_"+a.view_id)}function ppsGetPopupById(b){for(var a=0;a<ppsPopups.length;a++){if(ppsPopups[a].id==b){return ppsPopups[a]}}return false}function ppsGetPopupByViewId(a){for(var b=0;b<ppsPopups.length;b++){if(ppsPopups[b].view_id==a){return ppsPopups[b]}}return false}function ppsInitBgOverlay(){jQuery("body").append('<div id="ppsPopupBgOverlay" />');jQuery("#ppsPopupBgOverlay").click(function(){if(ppsPopups&&ppsPopups.length){for(var a=0;a<ppsPopups.length;a++){if(ppsPopups[a]&&ppsPopups[a].params&&ppsPopups[a].params.main&&ppsPopups[a].params.main.close_on&&ppsPopups[a].params.main.close_on=="overlay_click"){ppsClosePopup(ppsPopups[a])}}}})}function ppsShowBgOverlay(b){if(b&&isNumericPps(b)){b=ppsGetPopupById(b)}if(b.ignore_background){return}var a=jQuery("#ppsPopupBgOverlay");a.css({"background-position":"","background-repeat":"","background-attachment":"","-webkit-background-size":"","-moz-background-size":"","-o-background-size":"","background-size":"","background-color":"","background-url":""}).removeClass("ppsSnow");if(b&&b.params){if(typeof(b.params.tpl.bg_overlay_opacity)!=="undefined"){if(!b.params.tpl.bg_overlay_opacity||b.params.tpl.bg_overlay_opacity==""){b.params.tpl.bg_overlay_opacity=0}var c=parseFloat(b.params.tpl.bg_overlay_opacity);if(!isNaN(c)){a.css({opacity:c})}}if(typeof(b.params.tpl.bg_overlay_type)!=="undefined"){switch(b.params.tpl.bg_overlay_type){case"color":a.css({"background-color":b.params.tpl.bg_overlay_color});break;case"img":if(b.params.tpl.bg_overlay_img){switch(b.params.tpl.bg_overlay_img_pos){case"stretch":a.css({"background-position":"center center","background-repeat":"no-repeat","background-attachment":"fixed","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover"});break;case"center":a.css({"background-position":"center center","background-repeat":"no-repeat","background-attachment":"scroll","-webkit-background-size":"auto","-moz-background-size":"auto","-o-background-size":"auto","background-size":"auto"});break;case"tile":a.css({"background-position":"left top","background-repeat":"repeat","background-attachment":"scroll","-webkit-background-size":"auto","-moz-background-size":"auto","-o-background-size":"auto","background-size":"auto"});break}a.css({"background-image":'url("'+b.params.tpl.bg_overlay_img+'")'})}break;case"snow":a.addClass("ppsSnow");break}}}a.show()}function ppsHideBgOverlay(a){if(a&&isNumericPps(a)){a=ppsGetPopupById(a)}if(a.ignore_background){return}jQuery("#ppsPopupBgOverlay").hide()}function ppsBindPopupActions(b){var a=ppsGetPopupShell(b);if(a.find(".ppsSubscribeForm_aweber").length){a.find(".ppsSubscribeForm_aweber").submit(function(){if(jQuery(this).find("input[name=email]").val()){ppsPopupSubscribeSuccess(b)}})}if(a.find(".ppsSmLink").length){a.find(".ppsSmLink").click(function(){_ppsPopupSetActionDone(b,"share",jQuery(this).data("type"))})}if(a.find(".supsystic-social-sharing").length){a.find(".supsystic-social-sharing a").click(function(){var d=this.hostname,e="";if(d&&d!=""){switch(d){case"www.facebook.com":e="facebook";break;case"plus.google.com":e="googleplus";break;case"twitter.com":e="twitter";break;default:e=d;break}_ppsPopupSetActionDone(b,"share",e)}})}if(a.find(".fb_iframe_widget").length){_ppsBindFbLikeBtnAction(b)}if(b.type=="age_verify"){var c=a.find(".ppsBtn");if(c&&c.size()){c.click(function(){var e=jQuery(this).attr("class").split(" "),f=0;if(e&&e.length){for(var d=0;d<e.length;d++){if(e[d].indexOf("ppsBtn_")===0){f=parseInt(e[d].split("_")[1]);break}}}_ppsPopupSetActionDone(b,"age_verify",f)})}}}function _ppsBindFbLikeBtnAction(a){if(typeof(FB)==="undefined"){setTimeout(function(){_ppsBindFbLikeBtnAction(a)},500);return}FB.Event.subscribe("edge.create",function(b){_ppsPopupSetActionDone(a,"fb_like")});FB.Event.subscribe("xfbml.render",function(b){setTimeout(function(){setTimeout(function(){_ppsPositionPopup({popup:a})},1000);if(a.render_with_fb_load){ppsCheckShowPopup(a);_ppsPositionPopup({popup:a})}else{_ppsPositionPopup({popup:a})}},1000)})}function ppsPopupSubscribeSuccess(a,b){if(a&&isNumericPps(a)){a=ppsGetPopupById(a)}_ppsPopupSetActionDone(a,"subscribe",false,b)}function _ppsPopupBindDelay(a,d,c){if(a&&isNumericPps(a)){a=ppsGetPopupById(a)}var b=(a.params.main[c]&&parseInt(a.params.main[c])&&parseInt(a.params.main[d]))?(parseInt(a.params.main[d])*1000):0;if(b){if(d=="show_on_page_load_delay"&&parseInt(a.params.main.enb_page_load_global_delay)){a.start_time=(new Date).getTime();_ppsPopupBindUnloadDelay(d,a);var e=parseInt(getCookiePps("pps_un_"+d+"_"+a.id));if(e&&e>0){b-=e;if(b<0){b=0}}}setTimeout(function(){ppsCheckShowPopup(a)},b);return true}return false}function _ppsPopupBindUnloadDelay(b,a){jQuery(window).unload(function(){var c=a.is_rendered?0:(new Date()).getTime()-a.start_time;setCookiePps("pps_un_"+b+"_"+a.id,c)})}function ppsBindPopupForceShow(a){if(a.params.main.show_on!="link_follow"){var b=toeGetHashParams();if(b&&b.length&&toeInArray("ppsShowPopUp_"+a.id,b)!==-1){ppsCheckShowPopup(a)}}}function ppsCheckPopupGetNotices(a){var c={errors:getDataLcs("ppsErrors"),messages:getDataLcs("ppsMsgs")};if(c.errors){c.error=true}if(c.errors||c.messages){var b=ppsGetPopupShell(a);toeProcessAjaxResponsePps(c,b.find(".ppsSubMsg"))}}function _ppsCheckIsPageCached(){if(g_ppsIsPageCachedChecked){return g_ppsIsPageCached}jQuery("*:not(iframe,video,object)").contents().filter(function(){return this.nodeType==8}).each(function(a,b){if(b.nodeValue&&(b.nodeValue.indexOf("Performance optimized by W3 Total Cache")!==-1||b.nodeValue.indexOf("Cached page generated by WP-Super-Cache")!==-1)){g_ppsIsPageCached=true;return false}});g_ppsIsPageCachedChecked=true;return g_ppsIsPageCached}function _ppsUpdatePopupNonces(b){if(!b._nonces_updated){var a=ppsGetPopupShell(b),e=a.find("form"),d=[],c=["ppsSubscribeForm","ppsLoginForm","ppsRegForm"];if(e&&e.size()){e.each(function(){for(var f=0;f<c.length;f++){if(jQuery(this).hasClass(c[f])){d.push(c[f])}}})}if(d&&d.length){jQuery.sendFormPps({msgElID:"noMessages",data:{mod:"popup",action:"updateNonce",id:b.id,get_for:d},onSuccess:function(g){if(!g.error&&g.data.update_for){var f=ppsGetPopupShell(b);for(var h in g.data.update_for){f.find("."+h).find('input[name="_wpnonce"]').val(g.data.update_for[h])}}}})}b._nonces_updated=true}}function _ppsBindClickHrefSaving(){for(var a=0;a<ppsPopups.length;a++){if(ppsPopups[a].params&&ppsPopups[a].params.tpl&&(parseInt(ppsPopups[a].params.tpl.sub_redirect_to_btn_url)||parseInt(ppsPopups[a].params.tpl.close_redirect_to_btn_url))){var b=jQuery('[onclick*="ppsShowPopup('+ppsPopups[a].id+')"]');ppsPopups[a]=_ppsSaveClickHref(ppsPopups[a],b)}}}function _ppsSaveClickHref(b,a){if(b.params&&b.params.tpl&&a&&a.length){var c=a.attr("href");if(parseInt(b.params.tpl.sub_redirect_to_btn_url)){b.params.sub_redirect_to_btn_url_href=c}if(parseInt(b.params.tpl.close_redirect_to_btn_url)){b.params.close_redirect_to_btn_url_href=c}}return b}function ppsAddShowClb(b,a){if(!g_ppsShowCallbacks[b]){g_ppsShowCallbacks[b]=[]}g_ppsShowCallbacks[b].push(a)}function runShowClb(a,c){if(a&&isNumericPps(a)){a=ppsGetPopupById(a)}if(g_ppsShowCallbacks[a.id]&&g_ppsShowCallbacks[a.id].length){for(var b=0;b<g_ppsShowCallbacks[a.id].length;b++){if(typeof(g_ppsShowCallbacks[a.id][b])==="function"){g_ppsShowCallbacks[a.id][b](a,c)}}}};